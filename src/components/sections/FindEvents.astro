---
import Button from "../elements/Button.astro";
import rightPattern from "../../images/pattern-right.svg";
import leftPattern from "../../images/pattern-left.svg";
import bottomPattern from "../../images/pattern-bottom.svg";
---

<section class="py-20">
  <div class="container mx-auto max-w-screen-xl p-5 relative">
    <div class="flex justify-center">
      <img src={leftPattern.src} class="absolute left-[15%] top-[50%] hoverable" />
      <img src={bottomPattern.src} class="absolute left-1/3 top-3/4 hoverable" />
      <img src={rightPattern.src} class="absolute right-1/4 top-1/3 hoverable" />
      <div class="sm:w-[565px] w-full text-center">
        <p class="text-gray-500 text-2xl mb-10">Features</p>
        <h2 class="text-5xl my-10 font-heading leading-[3.5rem]">
          <span class="text-green-gradient">Find</span> Tech Events that matters
        </h2>
        <p class="text-lg">
          Discover, connect, and grow with tech events <span class="text-emerald-500">tailored</span
          > to your interests and goals
        </p>
        <div class="my-10">
          <Button label="Explore Events" size="lg" href="/events" style="secondary" />
        </div>
      </div>
    </div>
  </div>
  <!-- Slider main container -->
  <div class="py-20">
    <div class="swiper">
      <!-- Additional required wrapper -->
      <div class="swiper-wrapper">
        <!-- Slides -->

        <img src="https://swiperjs.com/demos/images/nature-4.jpg" class="swiper-slide rounded-xl" />
        <img src="https://swiperjs.com/demos/images/nature-6.jpg" class="swiper-slide rounded-xl" />
        <img src="https://swiperjs.com/demos/images/nature-8.jpg" class="swiper-slide rounded-xl" />

        <img src="https://swiperjs.com/demos/images/nature-4.jpg" class="swiper-slide rounded-xl" />
        <img src="https://swiperjs.com/demos/images/nature-6.jpg" class="swiper-slide rounded-xl" />
        <img src="https://swiperjs.com/demos/images/nature-8.jpg" class="swiper-slide rounded-xl" />
      </div>
      <!-- If we need pagination -->
      <div class="swiper-pagination"></div>
      <!-- If we need navigation buttons -->
      <div class="swiper-button-prev"></div>
      <div class="swiper-button-next"></div>

      <!-- If we need scrollbar -->
      <div class="swiper-scrollbar"></div>
    </div>
  </div>
</section>

<style>
  .swiper {
    width: 100%;
    padding-top: 50px;
    padding-bottom: 50px;
  }

  .swiper-slide {
    background-position: center;
    background-size: cover;
    width: 500px;
    height: 400px;
  }

  .swiper-slide img {
    display: block;
    width: 100%;
  }
  .swiper-slide-active {
    width: 600px;
    margin-top: -2rem;
  }
  .swiper-scrollbar {
    display: none;
  }
</style>

<script>
  import { gsap } from "gsap";
  // import Swiper and modules styles
  const hoverableDivs = document.querySelectorAll(".hoverable")!;

  const hoverEffect = (e: MouseEvent, div: Element) => {
    const rect = div.getBoundingClientRect();
    const offsetX = (rect.left + rect.right) / 2 - e.clientX;
    const offsetY = (rect.top + rect.bottom) / 2 - e.clientY;

    gsap.to(div, {
      x: offsetX,
      y: offsetY,
      duration: 1,
    });
  };
  hoverableDivs.forEach((div) => {
    div.addEventListener("mousemove", (e) => hoverEffect(e as MouseEvent, div));
  });
</script>
<script type="module">
  import Swiper from "https://cdn.jsdelivr.net/npm/swiper@11/swiper-bundle.min.mjs";
  const swiper = new Swiper(".swiper", {
    effect: "coverflow",
    grabCursor: true,
    centeredSlides: true,
    slidesPerView: "auto",
    speed: 400,
    spaceBetween: 120,
    autoplay: {
      delay: 2500,
      disableOnInteraction: false,
    },
    loop: true,
    // loop:true,
    coverflowEffect: {
      rotate: 0,
      stretch: 0,
      depth: 100,
      modifier: 2,
      slideShadows: true,
    },
  });
</script>
