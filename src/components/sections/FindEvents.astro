---
import Button from "../elements/Button.astro";
import rightPattern from "../../images/pattern-right.svg";
import leftPattern from "../../images/pattern-left.svg";
import osca from "../../images/osca.png";
import image from "../../images/image.png";
import bottomPattern from "../../images/pattern-bottom.svg";
---

<section class="py-20">
  <div class="container mx-auto max-w-screen-xl p-5 relative">
    <div class="flex justify-center">
      <img
        src={leftPattern.src}
        class="absolute sm:left-[15%] left-2 sm:top-[50%] top-[60%] hoverable sm:w-11 w-8"
      />
      <img
        src={bottomPattern.src}
        class="absolute sm:left-1/3 right-1/4 sm:top-3/4 top-[90%] hoverable sm:w-9 w-7"
      />
      <img
        src={rightPattern.src}
        class="absolute sm:right-1/4 right-10 top-1/3 hoverable sm:w-8 w-6"
      />
      <div class="sm:w-[565px] w-full text-center">
        <p class="text-gray-500 text-2xl mb-10">Features</p>
        <h2 class="sm:text-5xl text-4xl my-10 font-heading sm:leading-[3.5rem] leading-[3rem]">
          <span class="text-green-gradient">Find</span> Tech Events that matters
        </h2>
        <p class="text-lg">
          Discover, connect, and grow with tech events <span class="text-emerald-500">tailored</span
          > to your interests and goals
        </p>
        <div class="my-14 flex sm:flex-row flex-col justify-center w-full">
          <Button label="Explore Events" size="lg" href="/events" style="secondary" />
        </div>
      </div>
    </div>
  </div>
  <!-- Slider main container -->
  <div class="py-10 slider">
    <div class="swiper">
      <div class="swiper-wrapper">
        <img src={osca.src} class="swiper-slide rounded-2xl" />
        <img src={image.src} class="swiper-slide rounded-2xl" />
        <img src={osca.src} class="swiper-slide rounded-2xl" />
        <img src={osca.src} class="swiper-slide rounded-2xl" />
        <img src={osca.src} class="swiper-slide rounded-2xl" />
      </div>
    </div>
  </div>
</section>

<style>
  /* .slider {
    height: 600px;
    position: relative;
  } */
  .swiper {
    width: 100%;
    padding-top: 50px;
    padding-bottom: 50px;
    position: relative;
    /* overflow: hidden; */
  }

  .swiper-slide {
    filter: grayscale(100%);
    /* background-position: center;
    background-size: cover;
    width: 500px;
    height: 500px; */
  }

  .swiper-slide img {
    display: block;
    width: 100%;
    /* transition: all 3s ease-in; */
  }
  .swiper-slide-active {
    /* width: 650px; */
    margin-top: -2rem;
  }
  .swiper-slide-active {
    filter: grayscale(0);
  }
  @media (max-width: 640px) {
    .swiper-slide {
      display: block;
      /* width: 300px; */
    }
    .swiper-slide-active {
      /* width: 300px; */
    }
  }
</style>

<script>
  import { gsap } from "gsap";
  const hoverableDivs = document.querySelectorAll(".hoverable")!;

  const hoverEffect = (e: MouseEvent, div: Element) => {
    const rect = div.getBoundingClientRect();
    const offsetX = (rect.left + rect.right) / 2 - e.clientX;
    const offsetY = (rect.top + rect.bottom) / 2 - e.clientY;

    gsap.to(div, {
      x: offsetX,
      y: offsetY,
      duration: 1,
    });
  };
  hoverableDivs.forEach((div) => {
    div.addEventListener("mousemove", (e) => hoverEffect(e as MouseEvent, div));
  });
</script>
<script type="module">
  import Swiper from "https://cdn.jsdelivr.net/npm/swiper@11/swiper-bundle.min.mjs";
  const swiper = new Swiper(".swiper", {
    effect: "coverflow",
    grabCursor: true,
    centeredSlides: true,
    slidesPerView: 2,
    speed: 1000,
    spaceBetween: 120,
    autoplay: {
      delay: 2000,
      disableOnInteraction: false,
    },
    loop: true,
    coverflowEffect: {
      rotate: 0,
      stretch: 0,
      depth: 100,
      modifier: 2,
      slideShadows: true,
    },
    breakpoints: {
      640: {
        slidesPerView: 2,
        spaceBetween: 120,
      },
      320: {
        slidesPerView: 1.1,
        spaceBetween: 50,
      },
    },
  });
</script>
